<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NDT Tool Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }
        .image-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('Gemini_Generated_Image_jsnierjsnierjsni.png');
            background-size: cover;
            background-position: center;
            z-index: -2;
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: -1;
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Main container for the entire app */
        #app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            transition: flex-direction 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Toolbar styling */
        #toolbar {
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1), height 0.5s cubic-bezier(0.4, 0, 0.2, 1), padding 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            height: 80px; /* Top bar height */
            padding: 0 1rem;
        }
        #toolbar-content {
            transition: flex-direction 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* State when a tool is active */
        #app-container.tool-active {
            flex-direction: row;
        }
        #app-container.tool-active #toolbar {
            width: 80px; /* Sidebar width */
            height: 100vh;
            padding: 1rem 0;
        }
        #app-container.tool-active #toolbar-content {
            flex-direction: column;
        }
        
        /* Content area transitions */
        #landing-content, #tool-iframe {
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body class="bg-black text-white">

    <!-- Image Background -->
    <div class="image-background" id="image-bg"></div>
    <div class="overlay" id="image-overlay"></div>

    <!-- App Container -->
    <div id="app-container">
        <!-- Toolbar (starts at top, moves to left) -->
        <header id="toolbar" class="bg-gray-900 flex-shrink-0 flex items-center justify-center">
            <nav id="toolbar-content" class="flex items-center justify-center gap-4">
                <!-- Tool icons will be generated here -->
            </nav>
        </header>

        <!-- Main Content Area -->
        <main id="main-content" class="flex-grow flex flex-col items-center justify-center p-8 relative">
            <!-- Landing page description -->
            <div id="landing-content" class="text-center">
                <h1 id="landing-title" class="text-4xl md:text-5xl font-bold mb-4 tracking-tight">NDT Tool Suite</h1>
                <p id="landing-description" class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto">
                    A collection of powerful and easy-to-use tools for Non-Destructive Testing professionals. Mouse over a tool above to learn more.
                </p>
            </div>
            
            <!-- Iframe for active tool -->
            <iframe id="tool-iframe" class="w-full h-full border-none absolute top-0 left-0 opacity-0 pointer-events-none"></iframe>
        </main>
    </div>

    <script>
        // --- DATA ---
        const tools = [
             {
                id: 'home',
                name: 'Home',
                description: 'A collection of powerful and easy-to-use tools for Non-Destructive Testing professionals. Mouse over a tool above to learn more.',
                url: '#',
                active: true,
                isHome: true,
                icon: `<svg class="w-7 h-7 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>`
            },
            {
                id: 'tofd',
                name: 'TOFD Coverage & Dead Zone Calculator',
                description: 'Calculate the coverage and dead zones for Time-of-Flight Diffraction inspections.',
                url: 'https://to-fd-calculator.vercel.app',
                active: true,
                icon: `<svg class="w-7 h-7 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-6m-3 6v-3m-3 3v-6m0 0l6-6m-6 6l6 6"></path></svg>`
            },
            {
                id: '3dview',
                name: '3D Model Texture Viewer - Fixed',
                description: 'View and inspect 3D models with applied textures for detailed analysis.',
                url: 'https://3-d-view-r-bclg.vercel.app',
                active: true,
                icon: `<svg class="w-7 h-7 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.27 6.96L12 12.01l8.73-5.05M12 22.08V12"></path></svg>`
            },
            {
                id: 'phasedarray',
                name: 'Phased Array Calculator (Coming Soon)',
                description: 'Design and visualize phased array ultrasonic testing setups.',
                url: '#',
                active: false,
                icon: `<svg class="w-7 h-7 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>`
            }
        ];

        // --- DOM ELEMENTS ---
        const appContainer = document.getElementById('app-container');
        const toolbarContent = document.getElementById('toolbar-content');
        const landingContent = document.getElementById('landing-content');
        const landingTitle = document.getElementById('landing-title');
        const landingDescription = document.getElementById('landing-description');
        const toolIframe = document.getElementById('tool-iframe');
        const imageBg = document.getElementById('image-bg');
        const imageOverlay = document.getElementById('image-overlay');
        const homeTool = tools.find(t => t.isHome);

        // --- FUNCTIONS ---

        function createToolbarButton(tool) {
            const buttonClasses = `tool-btn relative flex items-center justify-center h-16 w-16 rounded-lg text-gray-400 transition-colors ${tool.active ? 'hover:bg-gray-700 hover:text-white cursor-pointer' : 'cursor-not-allowed'}`;
            return `
                <button id="btn-${tool.id}" data-tool-id="${tool.id}" class="${buttonClasses}">
                    ${tool.icon}
                </button>
            `;
        }
        
        function updateDescription(tool) {
            landingTitle.textContent = tool.name;
            landingDescription.textContent = tool.description;
        }

        function openTool(tool) {
            if (!tool.active || tool.isHome) return;
            
            // 1. Start all visual transitions immediately
            appContainer.classList.add('tool-active');
            imageBg.style.opacity = '0';
            imageOverlay.style.opacity = '0';
            landingContent.style.opacity = '0';
            
            // 2. Wait for the CSS transition to finish before loading the iframe
            setTimeout(() => {
                toolIframe.style.opacity = '1';
                toolIframe.style.pointerEvents = 'auto';
                toolIframe.src = tool.url;
            }, 500); // This duration must match the CSS transition duration (0.5s = 500ms)
        }

        function goHome() {
            // Start transition
            appContainer.classList.remove('tool-active');
            
            // Show image and landing content
            imageBg.style.opacity = '1';
            imageOverlay.style.opacity = '1';
            updateDescription(homeTool);
            landingContent.style.opacity = '1';

            // Hide and unload iframe
            toolIframe.style.opacity = '0';
            toolIframe.style.pointerEvents = 'none';
            toolIframe.src = 'about:blank';
        }

        function initializeUI() {
            toolbarContent.innerHTML = tools.map(createToolbarButton).join('');
        }

        // --- EVENT LISTENERS ---
        toolbarContent.addEventListener('mouseover', (e) => {
            if (appContainer.classList.contains('tool-active')) return;
            const button = e.target.closest('.tool-btn');
            if (button) {
                const tool = tools.find(t => t.id === button.dataset.toolId);
                if (tool) updateDescription(tool);
            }
        });
        
        toolbarContent.addEventListener('mouseleave', () => {
             if (appContainer.classList.contains('tool-active')) return;
             updateDescription(homeTool);
        });

        toolbarContent.addEventListener('click', (e) => {
            const button = e.target.closest('.tool-btn');
            if (button) {
                const tool = tools.find(t => t.id === button.dataset.toolId);
                if (tool) {
                    if (tool.isHome) {
                        goHome();
                    } else {
                        openTool(tool);
                    }
                }
            }
        });

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', initializeUI);
    </script>
</body>
</html>

